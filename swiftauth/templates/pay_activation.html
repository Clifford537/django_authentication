{% extends "dash.html" %}

{% block content %}
<div class="activation-container">
    <h2>Pay Activation Fee - $2.41</h2>
    <p>To enable withdrawals, please pay the activation fee using PayPal.</p>

    <!-- Flash Messages -->
    {% if messages %}
    <ul class="messages">
        {% for message in messages %}
        <li class="{% if message.tags %}{{ message.tags }}{% endif %}">
            <span class="close-btn" onclick="this.parentElement.style.display='none';">&times;</span>
            {{ message }}
        </li>
        {% endfor %}
    </ul>
    {% endif %}

    <div id="paypal-container-AT4S7Q8JVZY56"></div>
</div>

<!-- Load PayPal SDK FIRST -->
<script 
  src="https://www.paypal.com/sdk/js?client-id=BAA2vPxBYtrvPojARg4mnV8Bo9ChjMug2YCdlndIaVyXMiADjQeikIcTGHvdIsFd-FNHH3zeXTb0HOSWhQ&components=hosted-buttons&disable-funding=venmo&currency=USD">
</script>

<!-- THEN render the Hosted Button -->
<script>
  window.onload = function () {
    if (paypal && paypal.HostedButtons) {
      paypal.HostedButtons({
        hostedButtonId: "AT4S7Q8JVZY56",
      }).render("#paypal-container-AT4S7Q8JVZY56");
    }
  };
</script>

<style>
    .activation-container {
        max-width: 400px;
        margin: 50px auto;
        text-align: center;
        padding: 20px;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    h2 {
        color: #333;
        font-size: 22px;
        margin-bottom: 10px;
    }

    p {
        color: #666;
        font-size: 16px;
        margin-bottom: 20px;
    }

    /* Flash Messages */
    .messages {
        list-style: none;
        padding: 0;
        margin-bottom: 15px;
    }

    .messages li {
        position: relative;
        padding: 12px;
        border-radius: 5px;
        margin-bottom: 10px;
        font-size: 14px;
        font-weight: bold;
    }

    .messages .success {
        background: #d4edda;
        color: #155724;
        border-left: 5px solid #28a745;
    }

    .messages .error {
        background: #f8d7da;
        color: #721c24;
        border-left: 5px solid #dc3545;
    }

    .messages .info {
        background: #d1ecf1;
        color: #0c5460;
        border-left: 5px solid #17a2b8;
    }

    /* Close Button */
    .close-btn {
        position: absolute;
        right: 10px;
        top: 5px;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
        color: #333;
        background: none;
        border: none;
    }

    .close-btn:hover {
        color: black;
    }
</style>
{% endblock %}
